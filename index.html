<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drawing Challenge — Didier Bonnet</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: Georgia, 'Times New Roman', serif;
      background: #1a1410;
      color: #e8dcc8;
      min-height: 100vh;
    }

    header {
      text-align: center;
      padding: 3rem 1rem 2rem;
      border-bottom: 1px solid #3d2e1a;
    }

    header h1 {
      font-size: 2rem;
      color: #c9a84c;
      letter-spacing: 3px;
      text-transform: uppercase;
    }

    header p {
      margin-top: 0.5rem;
      color: #9a8a70;
      font-style: italic;
      font-size: 0.95rem;
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 3rem;
      padding: 1.5rem;
      background: #221a10;
      border-bottom: 1px solid #3d2e1a;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 1.8rem;
      color: #c9a84c;
      font-weight: bold;
    }

    .stat-label {
      font-size: 0.75rem;
      color: #9a8a70;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .card {
      background: #221a10;
      border: 1px solid #3d2e1a;
      border-radius: 4px;
      overflow: hidden;
      transition: border-color 0.2s;
    }

    .card:hover { border-color: #c9a84c; }

    .card img {
      width: 100%;
      aspect-ratio: 3/4;
      object-fit: cover;
      display: block;
      background: #2d2218;
      cursor: zoom-in;
    }

    /* Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.92);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      padding: 2rem;
      cursor: zoom-out;
    }

    .lightbox.active { display: flex; }

    .lightbox img {
      max-width: 60vw;
      max-height: 90vh;
      object-fit: contain;
      border: 1px solid #3d2e1a;
      flex-shrink: 0;
    }

    .lightbox-info {
      max-width: 320px;
      cursor: default;
    }

    .lightbox-info h2 {
      font-size: 1.1rem;
      color: #c9a84c;
      margin-bottom: 0.3rem;
    }

    .lightbox-info .lightbox-date {
      font-size: 0.75rem;
      color: #9a8a70;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 1rem;
    }

    .lightbox-info .lightbox-score {
      display: inline-block;
      background: #3d2e1a;
      color: #c9a84c;
      font-size: 0.85rem;
      padding: 0.2rem 0.6rem;
      border-radius: 2px;
      margin-bottom: 1.2rem;
    }

    .lightbox-info .lightbox-prompt {
      font-size: 0.85rem;
      color: #c8bca8;
      line-height: 1.7;
      border-left: 2px solid #3d2e1a;
      padding-left: 0.8rem;
      font-style: italic;
    }

    .lightbox-close {
      position: fixed;
      top: 1rem;
      right: 1.2rem;
      font-size: 1.5rem;
      color: #9a8a70;
      cursor: pointer;
      line-height: 1;
    }

    @media (max-width: 700px) {
      .lightbox { flex-direction: column; overflow-y: auto; }
      .lightbox img { max-width: 90vw; max-height: 60vh; }
      .lightbox-info { max-width: 90vw; }
    }

    .card-body {
      padding: 0.9rem 1rem;
    }

    .card-date {
      font-size: 0.7rem;
      color: #9a8a70;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .card-title {
      font-size: 0.95rem;
      color: #e8dcc8;
      margin: 0.3rem 0;
    }

    .card-score {
      display: inline-block;
      background: #3d2e1a;
      color: #c9a84c;
      font-size: 0.8rem;
      padding: 0.15rem 0.5rem;
      border-radius: 2px;
    }

    .empty {
      text-align: center;
      padding: 5rem 2rem;
      color: #9a8a70;
      font-style: italic;
      grid-column: 1 / -1;
    }

    footer {
      text-align: center;
      padding: 2rem;
      color: #4a3a28;
      font-size: 0.8rem;
      border-top: 1px solid #3d2e1a;
    }
  </style>
</head>
<body>

<header>
  <h1>Drawing Challenge</h1>
  <p>Medieval · Fantasy · Burlesque &mdash; un dessin par jour</p>
</header>

<div class="stats">
  <div class="stat">
    <div class="stat-value" id="total">0</div>
    <div class="stat-label">Dessins</div>
  </div>
  <div class="stat">
    <div class="stat-value" id="streak">0</div>
    <div class="stat-label">Streak</div>
  </div>
  <div class="stat">
    <div class="stat-value" id="avg">—</div>
    <div class="stat-label">Moyenne</div>
  </div>
</div>

<div class="gallery" id="gallery">
  <div class="empty">Les dessins apparaîtront ici au fil des sessions.</div>
</div>

<div class="lightbox" id="lightbox">
  <span class="lightbox-close" id="lightbox-close">&times;</span>
  <img id="lightbox-img" src="" alt="">
  <div class="lightbox-info" id="lightbox-info">
    <h2 id="lightbox-title"></h2>
    <div class="lightbox-date" id="lightbox-date"></div>
    <span class="lightbox-score" id="lightbox-score"></span>
    <div class="lightbox-prompt" id="lightbox-prompt"></div>
  </div>
</div>

<footer>
  Didier Bonnet &mdash; <a href="https://github.com/didierdbo" style="color:#c9a84c;">GitHub</a>
</footer>

<script>
  // drawings.js sera généré automatiquement à chaque ajout
  const drawings = [
    {
      date: "2026-02-26",
      title: "Corbeau bibliothécaire",
      file: "2026-02-26.jpg",
      score: 16,
      streak: 1,
      prompt: "Un corbeau perché sur une pile de trois vieux grimoires en équilibre instable. Il tient une plume d'oie dans le bec. Sur sa tête, un petit bonnet de clerc légèrement de travers. L'une de ses serres est posée sur un livre ouvert. Son œil — un seul visible — regarde directement le spectateur avec une expression de profond agacement d'être dérangé."
    }
  ];

  if (drawings.length > 0) {
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = '';

    drawings.forEach((d, i) => {
      gallery.innerHTML += `
        <div class="card">
          <img src="drawings/${d.file}" alt="${d.title}" loading="lazy" onclick="openLightbox(${i})">
          <div class="card-body">
            <div class="card-date">${d.date}</div>
            <div class="card-title">${d.title}</div>
            <span class="card-score">${d.score}/20</span>
          </div>
        </div>`;
    });

    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightbox-img');

    window.openLightbox = (i) => {
      const d = drawings[i];
      lbImg.src = `drawings/${d.file}`;
      lbImg.alt = d.title;
      document.getElementById('lightbox-title').textContent = d.title;
      document.getElementById('lightbox-date').textContent = d.date;
      document.getElementById('lightbox-score').textContent = `${d.score}/20`;
      document.getElementById('lightbox-prompt').textContent = d.prompt;
      lb.classList.add('active');
    };

    const closeLb = () => lb.classList.remove('active');
    lb.addEventListener('click', closeLb);
    document.getElementById('lightbox-close').addEventListener('click', closeLb);
    document.getElementById('lightbox-info').addEventListener('click', e => e.stopPropagation());
    lbImg.addEventListener('click', e => e.stopPropagation());
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeLb(); });

    const scores = drawings.map(d => d.score);
    document.getElementById('total').textContent = drawings.length;
    document.getElementById('streak').textContent = drawings[drawings.length-1]?.streak ?? 0;
    document.getElementById('avg').textContent = (scores.reduce((a,b)=>a+b,0)/scores.length).toFixed(1);
  }
</script>

</body>
</html>
